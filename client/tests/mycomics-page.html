<!doctype html>
 <html>
 <head>
   <meta charset='utf-8'>
   <link rel='import' href='../components/deps.html'>
   <script src='../bower_components/web-component-tester/browser.js'></script>s
 </head>
 <body>
   <template id='app' is='dom-bind'>
     <mycomics-page params='{{params}}'></comic-page>
     <editcomics-page params="{{params}}"></editcomics-page>
   </template>
   <script>
   var app = document.querySelector('#app');

   suite('<mycomics-page>', function(){
    test('create', function(){
      var page = document.querySelector('new-page create_comicstrip');    
      assert.error(page.submit());
      page.elements.namedItem('comistrip_name').value = 'test1';     
      assert(page.submit());
    });

    test('view', function(){
      var page = document.querySelector('mycomics-page');
      assert.equal(document.querySelector('mycomics-page listMycomics'), page.resp);
      assert(document.querySelector('mycomics-page listMycomics test1'));
    });

    test('update', function(){
      var page = document.querySelector('mycomics-page');
      var editURL = page.getElementById('listMycomics').elements.namedItem('test1').href;
      assertequal(editURL, '/api/mycomics/editComics/test1')

      var edit = document.querySelector('editComics test1');
      edit.elements.namedItem('create').value = 'test2';
      edit.submit();
      assert.error(document.querySelector('mycomics-page listMycomics test1'));
      assertequal(document.querySelector('mycomics-page listMycomics test2').href, '/api/mycomics/editComics/test2');

    });

    test('delete', function(){
      var edit = document.querySelector('editComics test2').elements.namedItem('editdelete').click();
      assert.error(document.querySelector('mycomics-page listMycomics test2'));

    });
   });
   </script>
 </body>
 </html>

