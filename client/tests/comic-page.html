<!doctype html>
 <html>
 <head>
   <meta charset="utf-8">
   <link rel="import" href="../components/deps.html">
   <script src="../bower_components/web-component-tester/browser.js"></script>
 </head>
 <body>
   <template id="app" is="dom-bind">
     <comic-page params="{{params}}"></comic-page>
   </template>
   <script>
    page({hashbang: true});
  </script>
   <script>
 var app = document.querySelector("#app");
 app.params = {
   comic: "test",
   strip: "test",
 };

 suite('<comic-page>', function() {
   setup(function() {
     var page = document.querySelector('comic-page');
     page.resp = new LoadingComicStrip();
   });
   test('read params', function() {
     var app = document.querySelector("#app");
     var page = document.querySelector('comic-page');
     assert.equal(page.params, app.params);
   });
   test('description', function() {
     var page = document.querySelector('comic-page');
     assert.equal(document.querySelector('comic-page h1 a').innerText, page.resp.comic.title);
     assert.equal(document.querySelector('comic-page h1 span').innerText, page.resp.title);
   });
   test('image loads', function() {
     var page = document.querySelector('comic-page');
     assert.equal(document.querySelector('comic-page img').attributes.src.value, page.resp.img);
   });
   test('comments rendered', function() {
     var comments = document.querySelectorAll('comment-box > div');
     assert.lengthOf(comments, 1);
   });
 });
   </script>
 </body>
 </html>

